#!/bin/bash

start_elm_tools () {
  if [ "$(docker ps -a | grep elm_tools)" ]; then
    echo "elm-tools is already running!"
    exit 1
  else
    echo "Starting elm-tools"
    docker run -dit --name elm_tools --rm -v "$(pwd):/code" -v "/tmp:/tmp" -w "/code" -e "HOME=/tmp" -u "$UID:$GID" --tty=false matzko/elm_tools
  fi
}

stop_elm_tools () {
  if [ "$(docker ps -a | grep elm_tools)" ]; then
    echo "Stopping elm-tools"
    docker stop elm_tools
  else
    echo "elm-tools is not running"
  fi
}

while [[ $# -gt 0 ]]
  do
  key="$1"

  case $key in
      --start)
        start_elm_tools
      ;;

      --stop)
        stop_elm_tools
      ;;

      *)    # unknown option
        start_elm_tools
        ;;
  esac
done
